{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/recomend.css') }}">
<title>Upload file</title>
{% endblock %}

{% block body %}
<div class="container">
    <h1>Please add some recomendations</h1>
    <div class="conten">
        <form action="/make_recomendation" method="post">
        <button type="submit"  id="send_btn" name="btn" onclick="sendData()" class="send_btn btn btn-primary">send ratings</button>
       
        {% for item in data %}
       <div class="slider">
        <a  class="x btn input-block-level">{{item[1]}}</a>

            <div class="row-xs-6">
                <input type="range" class="form-range" id={{item[0]}} min={{min - 0.5}} max={{max}} step="0.5" value={{min - 0.5}} 
                                onchange="myFunction(this.value,this.id)" 
                                oninput="(this.value == '{{min - 0.5}}' ) ? this.nextElementSibling.value = 'non rated' :this.nextElementSibling.value = this.value ">
                <output class="btn btn-primary output" name ={{item[0]}} >non rated</output>
            </div>
          
        </div>
        {% endfor %}
        </form>
    </div>

  
</div>

<script>
    var dict = {};
    var min = '{{min - 0.5}}'
function myFunction(value,id) {
        if (value == min) {
            delete dict[id];
        } else {
            dict[id] = value
        }

}

function sendData() {
        document.getElementById("send_btn").value = JSON.stringify(dict);
    }

</script>

{% endblock %}